<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Explore Bizuccess's curated list of the most reliable and reputable Employer of Record (EOR) service providers in (country). Find the perfect partner to manage your (country) workforce efficiently.">
    <meta name="keywords" content="{{region}} EOR service provider, {{region}} top EOR service provider,   {{region}} reliable EOR service provider,   {{region}} reputable EOR service provider">
    <title>Top Employer of Record (EOR) Services in {{regoin}} | Bizuccess Rankings</title>
    <link rel="icon" type="image/png" href="/images/bizuccess-badge.png">
    <link rel="stylesheet" href="/style.css">
    <style>
        .ranking-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 1px 3px rgba(0,0,0,0.2);
        }

        .ranking-table th, .ranking-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .ranking-table th {
            background-color: #f8f9fa;
            font-weight: 600;
            color: #333;
        }

        .ranking-table tr:hover {
            background-color: #f5f5f5;
        }

        .rank {
            width: 80px;
            text-align: center;
        }

        .rank span {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            background-color: #4285f4;
            color: white;
            border-radius: 50%;
            margin: 0 auto;
            font-weight: bold;
        }

        .strengths ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .strengths li {
            margin: 5px 0;
            padding-left: 20px;
            position: relative;
        }

        .strengths li:before {
            content: "âœ“";
            color: #4CAF50;
            position: absolute;
            left: 0;
        }

        .button {
            display: inline-block;
            padding: 8px 16px;
            background-color: #4285f4;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            transition: background-color 0.3s;
        }

        .button:hover {
            background-color: #3367d6;
        }

        .error-message {
            color: #dc3545;
            padding: 20px;
            text-align: center;
            background-color: #f8d7da;
            border-radius: 4px;
            margin: 20px 0;
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #666;
        }

        .home-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            padding: 12px 24px;
            background-color: #4285f4;
            color: white;
            text-decoration: none;
            border-radius: 50px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .home-button:hover {
            background-color: #3367d6;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .home-button:before {
            content: "ğŸ ";
            font-size: 1.2em;
        }

        /* å¯¼èˆªæ æ ·å¼ */
        nav {
            display: flex;
            align-items: center;
            padding: 0 2rem;
            background: #4F46E5;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            height: 96px;
        }

        .logo-area {
            display: inline-flex;
            align-items: center;
            gap: 14px;
            text-decoration: none;
            height: 80px;
            padding: 0 6px;
            cursor: pointer;
            transition: opacity 0.3s ease;
        }

        .logo-area:hover {
            opacity: 0.9;
        }

        .site-logo {
            width: 80px;
            height: 80px;
            display: block;
        }

        .logo-title {
            color: #fff;
            font-size: 16px;
            font-weight: 600;
            letter-spacing: 1px;
            text-transform: uppercase;
            font-family: 'SF Pro Display', Inter, -apple-system, BlinkMacSystemFont, sans-serif;
            opacity: 0.98;
            position: relative;
            padding: 4px 0;
            background: linear-gradient(
                to right,
                #ffffff 0%,
                rgba(255, 255, 255, 0.9) 50%,
                #ffffff 100%
            );
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-size: 200% auto;
            animation: shine 3s ease-in-out infinite;
            pointer-events: none; /* ç¡®ä¿æ–‡å­—ä¸ä¼šå¹²æ‰°ç‚¹å‡»äº‹ä»¶ */
        }

        @keyframes shine {
            0% {
                background-position: 200% center;
            }
            100% {
                background-position: -200% center;
            }
        }

        .logo-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 1px;
            background: linear-gradient(
                90deg,
                rgba(255, 255, 255, 0) 0%,
                rgba(255, 255, 255, 0.3) 50%,
                rgba(255, 255, 255, 0) 100%
            );
        }

        /* æ·»åŠ æ¸å˜å…‰æ•ˆ */
        nav::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(
                90deg,
                rgba(255, 255, 255, 0) 0%,
                rgba(255, 255, 255, 0.1) 50%,
                rgba(255, 255, 255, 0) 100%
            );
        }

        /* è°ƒæ•´ header ä½ç½® */
        header {
            margin-top: 96px;
            background: linear-gradient(135deg, #4F46E5 0%, #6366F1 100%);
            padding: 4rem 2rem;
            text-align: center;
            position: relative;
            min-height: 500px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: linear-gradient(125deg, 
                #4B50F7 0%, 
                #6366f1 25%,
                #818cf8 50%,
                #6366f1 75%,
                #4B50F7 100%
            );
            background-size: 400% 400%;
            animation: gradientAnimation 15s ease infinite;
            overflow: hidden;
        }

        @keyframes gradientAnimation {
            0% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
            100% {
                background-position: 0% 50%;
            }
        }

        header::before {
            content: '';
            position: absolute;
            width: 150%;
            height: 150%;
            top: -25%;
            left: -25%;
            background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.08'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E") repeat;
            transform: rotate(30deg);
            animation: patternMove 20s linear infinite;
        }

        @keyframes patternMove {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }

        header::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 50% 50%, 
                rgba(99, 102, 241, 0) 0%, 
                rgba(99, 102, 241, 0.2) 100%
            );
        }

        @media (max-width: 768px) {
            nav {
                padding: 0 1rem;
                height: 80px;
            }

            .logo-area {
                height: 64px;
                gap: 12px;
            }

            .site-logo {
                width: 64px;
                height: 64px;
            }

            .logo-title {
                font-size: 15px;
                letter-spacing: 0.8px;
            }

            header {
                margin-top: 80px;
            }
        }

        @media (max-width: 480px) {
            .logo-area {
                height: 56px;
                gap: 10px;
            }

            .site-logo {
                width: 48px;
                height: 48px;
            }

            .logo-title {
                font-size: 14px;
                letter-spacing: 0.6px;
            }
        }

        footer {
            background: linear-gradient(125deg, 
                #4B50F7 0%, 
                #6366f1 25%,
                #818cf8 50%,
                #6366f1 75%,
                #4B50F7 100%
            );
            color: #fff;
            text-align: center;
            padding: 40px 20px;
        }

        .disclaimer {
  max-width: 800px;
  margin: 40px auto;
  padding: 20px;
  background: linear-gradient(
    125deg,
    #4B50F7 0%,
    #6366F1 25%,
    #818CF8 50%,
    #6366F1 75%,
    #4B50F7 100%
  );
  border-radius: 8px;
  box-shadow: none;     /* remove the old box-shadow if you want it flat */
  color: #fff;          /* make all text inside white */
}

.disclaimer h3 {
  color: #fff;
  margin-bottom: 15px;
}

.disclaimer p {
  color: rgba(255, 255, 255, 0.9);
  line-height: 1.6;
}

.disclaimer a {
  color: #cbd5e1;
}

.disclaimer a:hover {
  color: #e0e7ff;
}
footer > p {
  margin: 0 0 20px;
  font-size: 0.9em;
  opacity: 0.8;
}

.spinner {
    width: 20px;
    height: 20px;
    border: 3px solid #f3f3f3;
    border-top: 3px solid #3498db;
    border-radius: 50%;
    animation: spin 1s linear infinite;
    display: inline-block;
    margin-right: 10px;
    vertical-align: middle;
}
@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}
#loading {
    margin-top: 20px;
    color: #666;
    font-size: 14px;
    text-align: center;
}
    </style>
</head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-LLBW13HNDT"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-LLBW13HNDT');
</script>
<body>
    <nav>
        <a href="/" class="logo-area">
            <img src="/images/bizuccess-badge.png" alt="Bizuccess Logo" class="site-logo">
            <span class="logo-title">TOP EOR & PAYROLL SERVICES</span>
        </a>
    </nav>

    <header>
        <h1 id="pageTitle">Employer of Record (EOR) Service Providers in {{region}}</h1>
        <p id="pageSubtitle">Streamline your {{region}} employment operations with professional EOR service providers.</p>
        <div id="last-updated">Last Updated: <span></span></div>
    </header>

    <a href="/" class="home-button">Return to Home</a>

    <div id="loading">Loading data...</div>

    <section class="intro">
        <h2 id="introTitle">Why Use an Employer of Record (EOR) Service in {{region}}?</h2>
        <p id="introText">Managing employment in {{region}} requires expertise in local regulations and compliance requirements. An EOR service helps businesses:</p>
        <ul id="benefitsList">
            <!-- Benefits will be loaded here -->
        </ul>
    </section>

    <div class="table-container">
        <table id="rankingsTable">
            <thead>
                <tr>
                    <th>Rank</th>
                    <th>Company</th>
                    <th>Description</th>
                    <th>Strengths</th>
                    <th>Website</th>
                </tr>
            </thead>
            <tbody id="rankingsTableBody">
                <!-- Rankings will be loaded here -->
            </tbody>
        </table>
        <div id="loading" style="display: none;">
            <div class="spinner"></div>
            <span>Loading rankings...</span>
        </div>
    </div>

    <footer>
        <p>&copy; 2025 EOR Comparison. All rights reserved.</p>
        <div class="disclaimer">
            <h3>Disclaimer:</h3>
            <p>Some of the content on this website, including the rankings and related data, is generated by artificial intelligence and is for reference purposes only. The displayed order of companies does not reflect actual rankings or authoritative evaluation. The information may contain inaccuracies or omissions, and users are advised to independently verify details through official or professional sources.</p>
            <p>If your company prefers not to be listed on this website, please contact us immediately at bizuccess@gmail.com, and we will promptly address the request.</p>
            <p>The website assumes no liability for any loss or damage resulting from reliance on the information provided.</p>
        </div>
    </footer>

    <script src="/js/regionData.js"></script>
    <script src="/js/timeSelector.js"></script>
    <script type="module"> 

    // è·å–URLä¸­çš„åœ°åŒºä¿¡æ¯
    function getRegionFromUrl() {
        const path = window.location.pathname;
        const match = path.match(/(?:eor|payroll)-services-provider-(.+)$/);
        return match ? match[1] : '';
    }

    // æ ¼å¼åŒ–åœ°åŒºåç§°
    function formatRegionName(region) {
        return region
            .split('-')
            .map(word => word.charAt(0).toUpperCase() + word.slice(1))
            .join(' ');
    }
  


// async function loadRankingData() {
//   try {
//     const region = getRegionFromUrl();
//     let { year, month } = getSelectedTime();
//     // pad month to two digits, e.g. "05"
//     month = month.toString().padStart(2, '0');
//     const serviceType = 'eor';
//     const url = `/api/rankings`
//       + `?region=${encodeURIComponent(region)}`
//       + `&serviceType=${encodeURIComponent(serviceType)}`
//       + `&year=${encodeURIComponent(year)}`
//       + `&month=${encodeURIComponent(month.toString().padStart(2,'0'))}`;

//       const res = await fetch(url);
//     if (!res.ok) throw new Error(`Server returned ${res.status}`);
//     const data = await res.json();

//     const tbody = document.getElementById('rankingsTableBody');
//     tbody.innerHTML = ''; // clear existing rows

//     data.forEach(row => {
     
//       console.log(row);
//       const tr = document.createElement('tr');
//       tr.innerHTML = `
//         <td class="rank"><span>${row.rankingPosition}</span></td>
//         <td>${row.companyName}</td>
//         <td>${row.companyDescription}</td>
//         <td class="strengths"> ${row.strengths.map(s => `<li>${s}</li>`).join('')}
//         <td>
//           <a class="button" href="${row.websiteLink}" target="_blank" rel="noopener">
//             Visit
//           </a>
//         </td>
//       `;
//       tbody.appendChild(tr);
//     });

//   } catch (err) {
//     console.error('Failed to load EOR rankings:', err);
//     // Optionally show a user-facing message:
//     const tbody = document.getElementById('rankingsTableBody');
//     tbody.innerHTML = `<tr><td colspan="5" class="error">
//       Unable to load rankings. Please try again later.
//     </td></tr>`;
//   }
// }


async function loadRankingData() {
  try {
    const region = getRegionFromUrl();
    let { year, month } = getSelectedTime();
    month = month.toString().padStart(2, '0');
    const serviceType = 'eor';
    const url = `/api/rankings`
      + `?region=${encodeURIComponent(region)}`
      + `&serviceType=${encodeURIComponent(serviceType)}`
      + `&year=${encodeURIComponent(year)}`
      + `&month=${encodeURIComponent(month)}`;

    const res = await fetch(url);
    if (!res.ok) throw new Error(`Server returned ${res.status}`);
    const data = await res.json();
    console.log('Raw data from server:', data);

    // Process and validate the data
    const processedData = data.map(row => {
      let strengths = [];
      try {
        if (typeof row.strengths === 'string') {
          strengths = JSON.parse(row.strengths);
        } else if (Array.isArray(row.strengths)) {
          strengths = row.strengths;
        }
      } catch (e) {
        console.error('Error parsing strengths:', e);
        strengths = [];
      }
      console.log('Processed strengths:', strengths);

      return {
        rankingPosition: parseInt(row.rankingPosition || row.ranking_position, 10) || 0,
        companyName: row.companyName || row.company_name || '',
        companyDescription: row.companyDescription || row.company_description || '',
        strengths: strengths,
        websiteLink: row.websiteLink || row.website_link || ''
      };
    });

    // Sort by ranking position and take top 10
    const top10 = processedData
      .sort((a, b) => a.rankingPosition - b.rankingPosition)
      .slice(0, 10);

    const tbody = document.getElementById('rankingsTableBody');
    tbody.innerHTML = ''; // clear existing rows

    top10.forEach(row => {
      console.log('Rendering row:', row);
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td class="rank">
          <span>${row.rankingPosition}</span>
        </td>
        <td>${row.companyName}</td>
        <td>${row.companyDescription}</td>
        <td class="strengths">
          <ul>
            ${row.strengths.map(s => `<li>${s}</li>`).join('')}
          </ul>
        </td>
        <td>
          <a class="button" href="${row.websiteLink}" target="_blank" rel="noopener">
            Visit
          </a>
        </td>
      `;
      tbody.appendChild(tr);
    });

  } catch (err) {
    console.error('Failed to load EOR rankings:', err);
    const tbody = document.getElementById('rankingsTableBody');
    tbody.innerHTML = `
      <tr>
        <td colspan="5" class="error">
          Unable to load rankings. Please try again later.
        </td>
      </tr>`;
  }
}

  



    // åˆå§‹åŒ–é¡µé¢ï¼šåŠ è½½åœ°åŒºã€æ—¶é—´æ§ä»¶ã€ç„¶åæ‹‰ EOR æ•°æ®
  async function initializePage() {
    if (!loadRankingData()) return;
    await initializeTimeSelector();
    await loadRankingData();
    try {
      await loadRankingData();
      document.getElementById('loading').style.display = 'none';
    } catch (err) {
      console.error(err);
      document.getElementById('loading').textContent = 'Error loading data';
    }
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initializePage);
  } else {
    initializePage();
  }

    // // åˆå§‹åŒ–é¡µé¢
    // async function initializePage() {
    //     try {
    //         // å…ˆåŠ è½½åœ°åŒºæ•°æ®
    //         const regionLoaded = loadRegionData();
            
    //         // å¦‚æœåœ°åŒºæ•°æ®åŠ è½½æˆåŠŸï¼Œå†åˆå§‹åŒ–æ—¶é—´é€‰æ‹©å™¨å’Œæ’åæ•°æ®
    //         if (regionLoaded) {
    //             await initializeTimeSelector();
    //             await loadRankingData();
    //         }
    //     } catch (error) {
    //         console.error('Error initializing page:', error);
    //         const errorDiv = document.createElement('div');
    //         errorDiv.className = 'error-message';
    //         errorDiv.innerHTML = `
    //             <h2>Error Loading Page</h2>
    //             <p>${error.message}</p>
    //             <a href="/" class="button">Return to Home</a>
    //         `;
    //         document.body.appendChild(errorDiv);
    //     }
    // }

    // // é¡µé¢åŠ è½½æ—¶æ‰§è¡Œ
    // if (document.readyState === 'loading') {
    //     document.addEventListener('DOMContentLoaded', initializePage);
    // } else {
    //     initializePage();
    // }
    </script>
</body>
</html> 